# ТЗ на сервис "Календарь" (3-4 модуль, образец)


## Общее описание

Сервис "Календарь" представляет собой максимально упрощенный сервис для хранения календарных событий и оправки уведомлений.
Сервис предполагает:
* возможность добавить/обновить событие
* возможность получить список событий на день/неделю/месяц
* возможность получить уведомление за N дней до события
Сервис НЕ предполагает:
* авторизации
* разграничения доступа
* web интерфейса


## Архитектура

Полностью завершенный сервис состоит из 5 процессов:

### API
API - предоставляет GRPC интерфейс для пользователей, реализует основные методы сервиса.
Т.к. авторизация и разделение доступа выходят за рамки сервиса, мы предполагаем что ID пользователя
просто передается через параметры или метаданные GRPC запроса.
Также API предоставляет prometheus интерфейс для мониторинга сервиса.

### Планировщик
Планировщик - фоновый процесс, не взаимодействует с пользователем, выполняет периодические задания:
* Выбор событий, требующих уведомления и отправка уведомлений в очередь рассыльщику
* Очистка старых (более 1 года назад) событий

### Рассыльщик
Рассыльщик - фоновый процесс, занимается отправкой уведомлений.
В рамках задания нет необходимости реальной отправки сообщений, достаточно если рассыльщик просто будет записывать их в лог.

### СУБД
Реляционная СУБД (postgres) - хранит информацию о событиях

## Очередь сообщений
Очередь сообщений (RabbitMQ) - используется для передачи событий рассыльщику


## Описание сущностей

### Событие
Событие - основная сущность, содержит в себе поля:
* UUID - уникальный идентификатор события
* Заголовок - короткий текст
* Дата и время события
* Длительность события
* Описание события - длинный текст, опционально
* Пользователь, владелец события
* За сколько времени высылать уведомление, опционально

### Уведомление
Уведомление - временная сущность, складывается в очередь для рассыльщика, содержит поля:
* Заголовок события
* Дата события
* Пользователь, которому отправлять

## Описание методов
* Создать (событие)
* Обновить (ID события, событие)
* Удалить (ID события)
* Список Событий На День (дата)
* Список Событий На Неделю (дата начала недели)
* Список Событий Не Месяц (дата начала месяца)

## Конфигурация, логирование, контейнеризация

Рекомендуется собирать проект в виде одного бинарного файла, а для запуска 
конкретного микросервиса использовать аргументы командной строки:

./cal_service api
./cal_service scheduler
./cal_service sender

Проект следует оформить в виде набора контейнеров для каждого из микросервисов.
Поскольку запуск будет осуществлять в контейнерах - логи нужно печатать в STDERR.
Сервисы должны получать настройки (например адрес и логин в СУБД) черезе переменные окружения.
При желании можно использовать конфиг viper, с поддержкой переменных окружения.

Развертывание микросервиса должно осуществляться командой `docker-compose up` в директории с проектом.




# Варианты проектов для 5 модуля

## Вариант 1. Анти-брутфорс

## Вариант 2. Сервис обработки изображений

## Вариант 3. Майнинг-агент
